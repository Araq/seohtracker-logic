<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nimrod. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module l_types</title>
<style type="text/css">

span.DecNumber {color: blue}
span.BinNumber {color: blue}
span.HexNumber {color: blue}
span.OctNumber {color: blue}
span.FloatNumber {color: blue}
span.Identifier  {color: black}
span.Keyword {font-weight: bold}
span.StringLit {color: blue}
span.LongStringLit {color: blue}
span.CharLit {color: blue}
span.EscapeSequence {color: black}
span.Operator {color: black}
span.Punctuation {color: black}
span.Comment, span.LongComment {font-style:italic; color: green}
span.RegularExpression  {color: DarkViolet}
span.TagStart {color: DarkViolet}
span.TagEnd {color: DarkViolet}
span.Key  {color: blue}
span.Value  {color: black}
span.RawData {color: blue}
span.Assembler  {color: blue}
span.Preprocessor {color: DarkViolet}
span.Directive  {color: DarkViolet}
span.Command, span.Rule, span.Hyperlink, span.Label, span.Reference, 
span.Other  {color: black}

div.navigation {
  -moz-border-radius: 5px 5px 5px 5px;
  float: left; 
  width: 30%;
  margin: 0; padding: 0;
  border: 3px outset #7F7F7F;
  background-color: #7F7F7F;
}

div.navigation ul {
  list-style-type: none;
  padding-left: 1em;
}
div.navigation ul li a, div.navigation ul li a:visited {
  font-weight: bold;
  color: #FFFFFF;
  text-decoration: none;
}
div.navigation ul li a:hover {
  font-weight: bold;
  text-decoration: none;
  color: gold;
}

div.content {
  margin-left: 30%;
  padding: 0 1em;
  border-left: 4em;
}

dl.item dd, dl.item dd p {
  margin-top:3px;
}
dl.item dd pre {
  margin-left: 15pt;
  border: 0px;
}
dl.item dt, dl.item dt pre {
  margin:  20pt 0 0 5pt;
}

pre, span.tok {
  background-color: #F9F9F9;
  border-color: #C4C4C4;
  border-style: solid;
  border-width: 1px 1px 1px 2px;
  color: black;
  line-spacing: 110%;
  padding: 2px;
}

span.red {
  color: #A80000;
}

hr {background-color:#9D9D9D; border:0 none; color:#9D9D9D; height:1px; width:100%;}

/*
:Author: David Goodger
:Contact: goodger@python.org
:Date: Date: 2006-05-21 22:44:42 +0200 (Sun, 21 May 2006)
:Revision: Revision: 4564
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/
/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th { border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first { margin-top: 0 ! important }
.last, .with-subtitle { margin-bottom: 0 ! important }
.hidden { display: none }
a.toc-backref { text-decoration: none ; color: black }
blockquote.epigraph { margin: 2em 5em ; }
dl.docutils dd { margin-bottom: 0.5em }
div.abstract { margin: 2em 5em }
div.abstract p.topic-title { font-weight: bold ; text-align: center }
div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ; border: medium outset ; padding: 1em }
div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title { font-weight: bold ; font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title { color: red ; font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication { margin: 2em 5em ; text-align: center ; font-style: italic }
div.dedication p.topic-title { font-weight: bold ; font-style: normal }
div.figure { margin-left: 2em ; margin-right: 2em }
div.footer, div.header { clear: both; font-size: smaller }
div.line-block { display: block ; margin-top: 1em ; margin-bottom: 1em }
div.line-block div.line-block { margin-top: 0 ; margin-bottom: 0 ;
  margin-left: 1.5em }
div.sidebar { margin-left: 1em ; border: medium outset ;
  padding: 1em ; background-color: #ffffee ; /*width: 40% ;*/ float: right ;
  clear: right }

div.sidebar p.rubric { font-family: sans-serif ; font-size: medium }
div.system-messages { margin: 5em }
div.system-messages h1 { color: red }
div.system-message { border: medium outset ; padding: 1em }
div.system-message p.system-message-title { color: red ; font-weight: bold }
div.topic { margin: 2em;}
h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }
h1.title { text-align: center }
h2.subtitle { text-align: center }
/* hr.docutils { width: 75% } */
img.align-left { clear: left }
img.align-right { clear: right }
ol.simple, ul.simple { margin-bottom: 1em }
ol.arabic { list-style: decimal }
ol.loweralpha { list-style: lower-alpha }
ol.upperalpha { list-style: upper-alpha }
ol.lowerroman { list-style: lower-roman }
ol.upperroman { list-style: upper-roman }
p.attribution { text-align: right ; margin-left: 50% }
p.caption { font-style: italic }
p.credits { font-style: italic ; font-size: smaller }
p.label { white-space: nowrap }
p.rubric { font-weight:bold;font-size:larger;color:maroon;text-align:center}
p.sidebar-title {font-family: sans-serif ;font-weight: bold ;font-size: larger }
p.sidebar-subtitle {font-family: sans-serif ; font-weight: bold }
p.topic-title {
font-weight: bold;
background-color: #6D6D6D;
border-bottom: 1px solid #000000;
border-top: 1px solid black;
color: white;
text-align: center;
margin: 0;
}
pre.address { margin-bottom: 0;margin-top:0;font-family:serif;font-size:100% }
pre.literal-block, pre.doctest-block {margin-left: 2em ;margin-right: 2em }
span.classifier {font-family: sans-serif;font-style: oblique }
span.classifier-delimiter {font-family: sans-serif;font-weight: bold }
span.interpreted {font-family: sans-serif }
span.option {white-space: nowrap }
span.pre {white-space: pre }
span.problematic {color: red }
span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation { border-left: solid 1px gray; margin-left: 1px }
table.docinfo {margin: 2em 4em }
table.docutils {margin-top: 0.5em;margin-bottom: 0.5em; border: 0 solid #9d9d9d; border-collapse: collapse; }
table.footnote {border-left: solid 1px black;margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {padding-left: 0.5em;padding-right: 0.5em;
  vertical-align: top;}

table.docutils td, table.docutils th { border-bottom:1px solid #9D9D9D; }
/* color: #4d4d4d} */

/* table.docutils td:hover, table.docinfo td:hover {color: #000000} */
  

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold;text-align: left;white-space: nowrap;padding-left: 0 }
  
table.docutils th
{
color: black;
font-weight:normal;
background-color: #E3E3E3;
border-top: 1px solid #1d1d1d;
border-bottom: 1px solid #1d1d1d;
}
  
h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {font-size: 100% }
ul.auto-toc { list-style-type: none }
/*a.reference { color: #E00000; font-weight:bold;}
a.reference:hover {color: #E00000;background-color: #ffff00;display: margin;
  font-weight:bold;}*/

</style>

</head>
<body>
<div class="document" id="documentId">
<h1 class="title">Module l_types</h1>
<div class="navigation" id="navigation">
<ul class="simple">
<li>
  <a class="reference" href="#6" id="56">Imports</a>
  <ul class="simple">
    
  </ul>
</li>
<li>
  <a class="reference" href="#7" id="57">Types</a>
  <ul class="simple">
      <li><a class="reference" href="#TWeight"
    title="TWeight* = object of TObject
  Fid: int
  Fdate: TTime                ## When was the object recorded.
  Fweight: float              ## Weight, according to type.
  Ftyp: Weight_type           ## Type of the weight.
  Fday_date: string ## date field in YYYYMMDD format for day comparisons. \
                    ##
                    ## May be nil, use the accessor to automatically recalculate it. The date
                    ## is calculated using the local time by default. This may be problematic
                    ## for unit testing, requiring a future l_db.USE_GMT_TIME hack.
  alternating_day*: bool      ## Marks entries as odd&#x2F;even days for colouring.
  changes_day*: bool ## \
                     ## Set to true if the immediate previous entry is for a different day.
                     ##
                     ## A group of three entries with the same day will have the same vale for
                     ## `alternating_day`, but only the first will have true in the
                     ## `changes_day` field."><wbr />TWeight</a></li>
  <li><a class="reference" href="#PWeight"
    title="PWeight* = ref TWeight"><wbr />PWeight</a></li>
  <li><a class="reference" href="#Weight_type"
    title="Weight_type* = enum 
  kilograms = 0, pounds = 1"><wbr />Weight_<wbr />type</a></li>

  </ul>
</li>
<li>
  <a class="reference" href="#10" id="60">Consts</a>
  <ul class="simple">
      <li><a class="reference" href="#db_name"
    title="db_name* = &quot;seohyun.sqlite3&quot;"><wbr />db_<wbr />name</a></li>
  <li><a class="reference" href="#kg_str"
    title="kg_str* = &quot;kg&quot;"><wbr />kg_<wbr />str</a></li>
  <li><a class="reference" href="#lb_str"
    title="lb_str* = &quot;lb&quot;"><wbr />lb_<wbr />str</a></li>
  <li><a class="reference" href="#nim_decimal_separator"
    title="nim_decimal_separator* = &#x27;.&#x27;"><wbr />nim_<wbr />decimal_<wbr />separator</a></li>
  <li><a class="reference" href="#num_decimals"
    title="num_decimals* = 1"><wbr />num_<wbr />decimals</a></li>

  </ul>
</li>
<li>
  <a class="reference" href="#12" id="62">Procs</a>
  <ul class="simple">
      <li><a class="reference" href="#retain_weight,PWeight"
    title="retain_weight*(w: PWeight)"><wbr />retain_<wbr />weight</a></li>
  <li><a class="reference" href="#release_weight,PWeight"
    title="release_weight*(w: var PWeight)"><wbr />release_<wbr />weight</a></li>
  <li><a class="reference" href="#=,TWeight,float"
    title="`weight =`*(s: var TWeight; value: float)">`<wbr />weight<wbr />=`</a></li>
  <li><a class="reference" href="#weight,PWeight"
    title="weight*(s: PWeight): float"><wbr />weight</a></li>
  <li><a class="reference" href="#to_unit,PWeight,Weight_type"
    title="to_unit*(w: PWeight; unit: Weight_type): float"><wbr />to_<wbr />unit</a></li>
  <li><a class="reference" href="#=,TWeight,int"
    title="`id =`*(s: var TWeight; value: int)">`<wbr />id<wbr />=`</a></li>
  <li><a class="reference" href="#id,TWeight"
    title="id*(s: TWeight): int"><wbr />id</a></li>
  <li><a class="reference" href="#=,TWeight,TTime"
    title="`date =`*(s: var TWeight; value: TTime)">`<wbr />date<wbr />=`</a></li>
  <li><a class="reference" href="#date,PWeight"
    title="date*(s: PWeight): TTime"><wbr />date</a></li>
  <li><a class="reference" href="#=,TWeight,Weight_type"
    title="`typ =`*(s: var TWeight; value: Weight_type)">`<wbr />typ<wbr />=`</a></li>
  <li><a class="reference" href="#typ,TWeight"
    title="typ*(s: TWeight): Weight_type"><wbr />typ</a></li>
  <li><a class="reference" href="#short,Weight_type"
    title="short*(x: Weight_type): string not nil"><wbr />short</a></li>
  <li><a class="reference" href="#typ_str,TWeight"
    title="typ_str*(s: TWeight): string"><wbr />typ_<wbr />str</a></li>
  <li><a class="reference" href="#init_weight,int,TTime,float,Weight_type"
    title="init_weight*(id: int; date: TTime; weight: float; typ: Weight_type): PWeight"><wbr />init_<wbr />weight</a></li>
  <li><a class="reference" href="#format_iso,TTimeInfo"
    title="format_iso*(info: TTimeInfo): string"><wbr />format_<wbr />iso</a></li>
  <li><a class="reference" href="#safe_str,string"
    title="safe_str*(s: string): string"><wbr />safe_<wbr />str</a></li>
  <li><a class="reference" href="#$,PWeight"
    title="`$`*(x: PWeight): string">`<wbr />$`</a></li>
  <li><a class="reference" href="#exists_value,seq[PWeight],PWeight"
    title="exists_value*(s: seq[PWeight]; x: PWeight): bool"><wbr />exists_<wbr />value</a></li>
  <li><a class="reference" href="#day_date,TWeight"
    title="day_date*(w: var TWeight): string"><wbr />day_<wbr />date</a></li>
  <li><a class="reference" href="#day_date,PWeight"
    title="day_date*(w: PWeight): string"><wbr />day_<wbr />date</a></li>

  </ul>
</li>

</ul>
</div>
<div class="content" id="content">
<p><a class="reference external" href="https://github.com/gradha/seohtracker-logic">Seohtracker logic</a> types module.</p>
<p>Defines global types, enums and consts for the logic. There is no need to import this explicitly, the <a class="reference external" href="l_main.html">l_main module</a> already exports the necessary stuff.</p>

<div class="section" id="6">
<h1><a class="toc-backref" href="#56">Imports</a></h1>
<dl class="item">
<a class="reference external" href="times.html">times</a>, <a class="reference external" href="l_log.html">l_log</a>, <a class="reference external" href="strutils.html">strutils</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#57">Types</a></h1>
<dl class="item">
<dt id="TWeight"><a name="TWeight"></a><pre><span class="Identifier">TWeight</span><span class="Operator">*</span> <span class="Other">{.</span><span class="Identifier">exportc</span><span class="Other">.}</span> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">TObject</span>
  <span class="Identifier">Fid</span><span class="Other">:</span> <span class="Identifier">int</span>
  <span class="Identifier">Fdate</span><span class="Other">:</span> <span class="Identifier">TTime</span>                <span class="Comment">## When was the object recorded.</span>
  <span class="Identifier">Fweight</span><span class="Other">:</span> <span class="Identifier">float</span>              <span class="Comment">## Weight, according to type.</span>
  <span class="Identifier">Ftyp</span><span class="Other">:</span> <span class="Identifier">Weight_type</span>           <span class="Comment">## Type of the weight.</span>
  <span class="Identifier">Fday_date</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Comment">## date field in YYYYMMDD format for day comparisons. \</span>
                    <span class="Comment">##</span>
                    <span class="Comment">## May be nil, use the accessor to automatically recalculate it. The date</span>
                    <span class="Comment">## is calculated using the local time by default. This may be problematic</span>
                    <span class="Comment">## for unit testing, requiring a future l_db.USE_GMT_TIME hack.</span>
  <span class="Identifier">alternating_day</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">bool</span>      <span class="Comment">## Marks entries as odd/even days for colouring.</span>
  <span class="Identifier">changes_day</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">bool</span> <span class="Comment">## \</span>
                     <span class="Comment">## Set to true if the immediate previous entry is for a different day.</span>
                     <span class="Comment">##</span>
                     <span class="Comment">## A group of three entries with the same day will have the same vale for</span>
                     <span class="Comment">## `alternating_day`, but only the first will have true in the</span>
                     <span class="Comment">## `changes_day` field.</span>
  </pre></dt>
<dd>
Internal db identifier of the object.

</dd>
<dt id="PWeight"><a name="PWeight"></a><pre><span class="Identifier">PWeight</span><span class="Operator">*</span> <span class="Other">{.</span><span class="Identifier">exportc</span><span class="Other">.}</span> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Identifier">TWeight</span></pre></dt>
<dd>


</dd>
<dt id="Weight_type"><a name="Weight_type"></a><pre><span class="Identifier">Weight_type</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">enum</span> 
  <span class="Identifier">kilograms</span> <span class="Other">=</span> <span class="DecNumber">0</span><span class="Other">,</span> <span class="Identifier">pounds</span> <span class="Other">=</span> <span class="DecNumber">1</span></pre></dt>
<dd>

Enums don't get exported to C at the moment, see <a class="reference external" href="https://github.com/Araq/Nimrod/issues/826">https://github.com/Araq/Nimrod/issues/826</a>. This is patched on the Objc side for the moment with duplicated C enums. See &quot;n_types.h&quot;

</dd>

</dl></div>
<div class="section" id="10">
<h1><a class="toc-backref" href="#60">Consts</a></h1>
<dl class="item">
<dt id="db_name"><a name="db_name"></a><pre><span class="Identifier">db_name</span><span class="Operator">*</span> <span class="Other">=</span> <span class="StringLit">&quot;seohyun.sqlite3&quot;</span></pre></dt>
<dd>


</dd>
<dt id="kg_str"><a name="kg_str"></a><pre><span class="Identifier">kg_str</span><span class="Operator">*</span> <span class="Other">=</span> <span class="StringLit">&quot;kg&quot;</span></pre></dt>
<dd>


</dd>
<dt id="lb_str"><a name="lb_str"></a><pre><span class="Identifier">lb_str</span><span class="Operator">*</span> <span class="Other">=</span> <span class="StringLit">&quot;lb&quot;</span></pre></dt>
<dd>


</dd>
<dt id="nim_decimal_separator"><a name="nim_decimal_separator"></a><pre><span class="Identifier">nim_decimal_separator</span><span class="Operator">*</span> <span class="Other">=</span> <span class="CharLit">'.'</span></pre></dt>
<dd>


</dd>
<dt id="num_decimals"><a name="num_decimals"></a><pre><span class="Identifier">num_decimals</span><span class="Operator">*</span> <span class="Other">=</span> <span class="DecNumber">1</span></pre></dt>
<dd>


</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#62">Procs</a></h1>
<dl class="item">
<dt id="retain_weight"><a name="retain_weight,PWeight"></a><pre><span class="Keyword">proc</span> <span class="Identifier">retain_weight</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">w</span><span class="Other">:</span> <span class="Identifier">PWeight</span><span class="Other">)</span> <span class="Other">{.</span><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">.}</span></pre></dt>
<dd>
<p>Exports to c a way to mark an object retained.</p>
<p>Nil references are ignored, it is safe to call this proc on them.</p>


</dd>
<dt id="release_weight"><a name="release_weight,PWeight"></a><pre><span class="Keyword">proc</span> <span class="Identifier">release_weight</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">w</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">PWeight</span><span class="Other">)</span> <span class="Other">{.</span><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">.}</span></pre></dt>
<dd>
<p>Exports to c a way to unmark a retained object.</p>
<p>The proc unrefs and initializes the variable to zero.</p>


</dd>
<dt id="="><a name="=,TWeight,float"></a><pre><span class="Keyword">proc</span> <span class="Other">`</span><span class="Identifier">weight</span> <span class="Operator">=</span><span class="Other">`</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">TWeight</span><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">)</span></pre></dt>
<dd>
<p>Setter for the weight attribute.</p>
<p>Note that this doesn't change the current type!</p>


</dd>
<dt id="weight"><a name="weight,PWeight"></a><pre><span class="Keyword">proc</span> <span class="Identifier">weight</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">PWeight</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">float</span></pre></dt>
<dd>
Getter for the weight attribute. dlog(&quot;Getter for weight for &quot; &amp; $s.Fweight)

</dd>
<dt id="to_unit"><a name="to_unit,PWeight,Weight_type"></a><pre><span class="Keyword">proc</span> <span class="Identifier">to_unit</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">w</span><span class="Other">:</span> <span class="Identifier">PWeight</span><span class="Other">;</span> <span class="Identifier">unit</span><span class="Other">:</span> <span class="Identifier">Weight_type</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">float</span></pre></dt>
<dd>
<p>Unit aware weight value getter.</p>
<p>Conversion rates obtained from <a class="reference external" href="https://en.wikipedia.org/wiki/Kilogram">https://en.wikipedia.org/wiki/Kilogram</a>.</p>


</dd>
<dt id="="><a name="=,TWeight,int"></a><pre><span class="Keyword">proc</span> <span class="Other">`</span><span class="Identifier">id</span> <span class="Operator">=</span><span class="Other">`</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">TWeight</span><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span></pre></dt>
<dd>
Setter for the id attribute.

</dd>
<dt id="id"><a name="id,TWeight"></a><pre><span class="Keyword">proc</span> <span class="Identifier">id</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">TWeight</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span></pre></dt>
<dd>
Getter for the id attribute.

</dd>
<dt id="="><a name="=,TWeight,TTime"></a><pre><span class="Keyword">proc</span> <span class="Other">`</span><span class="Identifier">date</span> <span class="Operator">=</span><span class="Other">`</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">TWeight</span><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">TTime</span><span class="Other">)</span></pre></dt>
<dd>
<p>Setter for the date attribute.</p>
<p>Also cleans the day_date field by forcing it to nil.</p>


</dd>
<dt id="date"><a name="date,PWeight"></a><pre><span class="Keyword">proc</span> <span class="Identifier">date</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">PWeight</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">TTime</span> <span class="Other">{.</span><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">.}</span></pre></dt>
<dd>
<p>Getter for the Fdate attribute.</p>
<p>Returns zero if the weight is invalid.</p>


</dd>
<dt id="="><a name="=,TWeight,Weight_type"></a><pre><span class="Keyword">proc</span> <span class="Other">`</span><span class="Identifier">typ</span> <span class="Operator">=</span><span class="Other">`</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">TWeight</span><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">Weight_type</span><span class="Other">)</span></pre></dt>
<dd>
Setter for the type of the weight.

</dd>
<dt id="typ"><a name="typ,TWeight"></a><pre><span class="Keyword">proc</span> <span class="Identifier">typ</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">TWeight</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Weight_type</span></pre></dt>
<dd>
Getter for the type of weight.

</dd>
<dt id="short"><a name="short,Weight_type"></a><pre><span class="Keyword">proc</span> <span class="Identifier">short</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">Weight_type</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Keyword">not</span> <span class="Keyword">nil</span></pre></dt>
<dd>


</dd>
<dt id="typ_str"><a name="typ_str,TWeight"></a><pre><span class="Keyword">proc</span> <span class="Identifier">typ_str</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">TWeight</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
<dd>
Returns the string to format the weight according to its type.

</dd>
<dt id="init_weight"><a name="init_weight,int,TTime,float,Weight_type"></a><pre><span class="Keyword">proc</span> <span class="Identifier">init_weight</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">id</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">date</span><span class="Other">:</span> <span class="Identifier">TTime</span><span class="Other">;</span> <span class="Identifier">weight</span><span class="Other">:</span> <span class="Identifier">float</span><span class="Other">;</span> <span class="Identifier">typ</span><span class="Other">:</span> <span class="Identifier">Weight_type</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">PWeight</span></pre></dt>
<dd>
<p>Returns a new weight object with the specified weight and date.</p>
<p>Pass a negative identifier if the object you are creating doesn't have a database row entry (yet).</p>


</dd>
<dt id="format_iso"><a name="format_iso,TTimeInfo"></a><pre><span class="Keyword">proc</span> <span class="Identifier">format_iso</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">info</span><span class="Other">:</span> <span class="Identifier">TTimeInfo</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">{.</span><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">EInvalidValue</span><span class="Other">]</span><span class="Other">.}</span></pre></dt>
<dd>
Convenience helper to transform a date into the CSV export date format.

</dd>
<dt id="safe_str"><a name="safe_str,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">safe_str</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">{.</span><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">.}</span></pre></dt>
<dd>
Returns the string or &quot;(nil)&quot; if the variable is not initialized.

</dd>
<dt id="$"><a name="$,PWeight"></a><pre><span class="Keyword">proc</span> <span class="Other">`</span><span class="Operator">$</span><span class="Other">`</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">PWeight</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">{.</span><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">.}</span></pre></dt>
<dd>
Debugging/logging helper of weights.

</dd>
<dt id="exists_value"><a name="exists_value,seq[PWeight],PWeight"></a><pre><span class="Keyword">proc</span> <span class="Identifier">exists_value</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">seq</span><span class="Other">[</span><span class="Identifier">PWeight</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">PWeight</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>
<p>Iterates s in search of a value x which has the same date, weight and type.</p>
<p>The comparison ignores the database identifier.</p>


</dd>
<dt id="day_date"><a name="day_date,TWeight"></a><pre><span class="Keyword">proc</span> <span class="Identifier">day_date</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">w</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">TWeight</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">{.</span><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">EInvalidValue</span><span class="Other">]</span><span class="Other">.}</span></pre></dt>
<dd>
Returns the day_date field of PWeight, which may need recalculation.

</dd>
<dt id="day_date"><a name="day_date,PWeight"></a><pre><span class="Keyword">proc</span> <span class="Identifier">day_date</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">w</span><span class="Other">:</span> <span class="Identifier">PWeight</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
<dd>
<p>Returns the day_date field of PWeight, which may need recalculation.</p>
<p>Returns the empty string if the weight pointer is nil.</p>


</dd>

</dl></div>

</div>

<small>Generated: 2015-01-17 21:32:07 UTC</small>
</div>
</body>
</html>
